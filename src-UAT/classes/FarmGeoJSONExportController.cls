public with sharing class FarmGeoJSONExportController {
	
	public String GeoJSON {get; set;}

	private String farmId;

	public FarmGeoJSONExportController(ApexPages.StandardController controller) {
		this.farmId = controller.getId();

		Land__c farm = getFarm(farmId);

		String stateCode = '';
		String countyCode = '';
		String farmNumber = '';
		String retrievalFarmId = stateCode + '-' + countyCode + '-' + farmNumber;

		this.GeoJSON = getGeoJSON(farm);
	}

	public String getGeoJSON(Land__c farm) {
		return '{"features":[{"type":"Feature","properties":{"farm_number":"' + farm.Farm_Number__c + '","admin_state":"29","tract_number":"7638","admin_county":"165","tract_boundary":true},"geometry":{"type":"Polygon","coordinates":[[[-81.664980,41.405804],[-81.663854,41.405853],[-81.663897,41.406054],[-81.664959,41.406054]]]}},{"type":"Feature","properties":{"farm_number":"' + farm.Farm_Number__c + '","admin_state":"29","tract_number":"7638","admin_county":"165","tract_boundary":true},"geometry":{"type":"Polygon","coordinates":[[[-81.110967,40.996843],[-81.109379,40.996972],[-81.109293,40.998398],[-81.104014,40.998495],[-81.103929,41.005005],[-81.111053,41.005070],[-81.110967,40.996843]]]}},{"type":"Feature","properties":{"clu_identifier":"bdf91226-2290-48d2-a4c9-a51f6d19d7b9","clu_alt_id":"{42ECD118-D1F1-4C9D-8B45-839D4FA5B529}","data_source":"michelle.comer","clu_status":null,"tract_number":"7638","last_change_date":1353032517000,"last_chg_user_nm":null,"creation_date":1132246098000,"ntv_sod_cvrt_yr":null,"admin_state":"29","clu_calculated_acreage":10,"OBJECTID":11628,"cropland_indicator_3CM":0,"edit_reason":null,"GlobalId":"{6C9816C2-DF3D-4A33-B499-0E7C89DEBF51}","SHAPE_STArea__":4932,"state_code":"29","cdist_fips":"2906","highly_erodible_land_type_code":"' + farm.Hel_Code__c + '","admin_county":"165","clu_classification_code":"10","sap_crp":null,"farm_number":"' + farm.Farm_Number__c + '","SHAPE_STLength__":599,"ESRI_OID":713,"clu_number":"3","data_source_site_identifier":null,"comments":" ","county_code":"165"},"geometry":{"type":"GeometryCollection","geometries":[{"type":"Polygon","coordinates":[[[-81.116460,40.996875],[-81.112426,40.996908],[-81.112297,40.998657],[-81.116760,40.998722]]]},{"type":"Point","coordinates":[-81.116460,40.996875]}]}},{"type":"Feature","properties":{"clu_identifier":"bdf91226-2290-48d2-a4c9-a51f6d19d7b9","clu_alt_id":"{42ECD118-D1F1-4C9D-8B45-839D4FA5B529}","data_source":"michelle.comer","clu_status":null,"tract_number":"7638","last_change_date":1353032517000,"last_chg_user_nm":null,"creation_date":1132246098000,"ntv_sod_cvrt_yr":null,"admin_state":"29","clu_calculated_acreage":10,"OBJECTID":11628,"cropland_indicator_3CM":0,"edit_reason":null,"GlobalId":"{6C9816C2-DF3D-4A33-B499-0E7C89DEBF51}","SHAPE_STArea__":4932,"state_code":"29","cdist_fips":"2906","highly_erodible_land_type_code":"' + farm.Hel_Code__c + '","admin_county":"165","clu_classification_code":"10","sap_crp":null,"farm_number":"' + farm.Farm_Number__c + '","SHAPE_STLength__":599,"ESRI_OID":713,"clu_number":"3","data_source_site_identifier":null,"comments":" ","county_code":"165"},"geometry":{"type":"GeometryCollection","geometries":[{"type":"Polygon","coordinates":[[[-81.664391,41.404687],[-81.664032,41.404720],[-81.664064,41.405664],[-81.664423,41.405674]]]},{"type":"Point","coordinates":[-81.664391,41.404687]}]}},{"type":"Feature","properties":{"clu_identifier":"bdf91226-2290-48d2-a4c9-a51f6d19d7b9","clu_alt_id":"{42ECD118-D1F1-4C9D-8B45-839D4FA5B529}","data_source":"michelle.comer","clu_status":null,"tract_number":"7638","last_change_date":1353032517000,"last_chg_user_nm":null,"creation_date":1132246098000,"ntv_sod_cvrt_yr":null,"admin_state":"29","clu_calculated_acreage":10,"OBJECTID":11628,"cropland_indicator_3CM":0,"edit_reason":null,"GlobalId":"{6C9816C2-DF3D-4A33-B499-0E7C89DEBF51}","SHAPE_STArea__":4932,"state_code":"29","cdist_fips":"2906","highly_erodible_land_type_code":"' + farm.Hel_Code__c + '","admin_county":"165","clu_classification_code":"10","sap_crp":null,"farm_number":"' + farm.Farm_Number__c + '","SHAPE_STLength__":599,"ESRI_OID":713,"clu_number":"3","data_source_site_identifier":null,"comments":" ","county_code":"165"},"geometry":{"type":"GeometryCollection","geometries":[{"type":"Polygon","coordinates":[[[-94.87828418397861,39.421475170628554],[-94.87796058206717,39.42147639682865],[-94.87708768191908,39.42147969653519],[-94.87712750513394,39.42146027718758],[-94.8772843366095,39.42144418599448],[-94.87751121601598,39.42143374767415],[-94.8776329278555,39.42141145676834],[-94.87769242597172,39.42134950894214],[-94.87765475961186,39.421248468962595],[-94.87758181551247,39.42113444784626],[-94.8774999457524,39.421013804186444],[-94.87744536231914,39.420933363629395],[-94.87738986979076,39.42081906094737],[-94.87732564653615,39.42070490797166],[-94.87733111817455,39.420582845127456],[-94.87745246439977,39.420547000338],[-94.87757491285782,39.42055179902877],[-94.87764712932183,39.42063873056842],[-94.87764949278935,39.42072678065035],[-94.87761511156847,39.420747661664976],[-94.87766933118408,39.4208145488769],[-94.87777084620107,39.42101620594464],[-94.87789037064289,39.42123788904775],[-94.87797224130125,39.421358540647034],[-94.87806975701861,39.42141117780233],[-94.87820166653323,39.421442933423876],[-94.87832392275182,39.42144095845658],[-94.8784813004031,39.421445182499404],[-94.87861229992433,39.42144306666134],[-94.87862454665662,39.42147388960676],[-94.87828418397861,39.421475170628554]]]},{"type":"Point","coordinates":[-94.87768005399994,39.42108505500005]}]}},{"type":"Feature","properties":{"clu_identifier":"dcaf340d-6adc-4e6a-8ec8-a61d22de6634","clu_alt_id":"{A0116BAA-C5B1-42C1-9C56-463686443DEA}","data_source":"michelle.comer","clu_status":null,"tract_number":"7638","last_change_date":1353032517000,"last_chg_user_nm":null,"creation_date":1132246098000,"ntv_sod_cvrt_yr":null,"admin_state":"29","clu_calculated_acreage":31,"OBJECTID":11630,"cropland_indicator_3CM":1,"edit_reason":null,"GlobalId":"{338AFF3C-9D5D-41F3-B637-60254FAD7608}","SHAPE_STArea__":214021,"state_code":"29","cdist_fips":"2906","highly_erodible_land_type_code":"' + farm.Hel_Code__c + '","admin_county":"165","clu_classification_code":"2","sap_crp":null,"farm_number":"' + farm.Farm_Number__c + '","SHAPE_STLength__":3079,"ESRI_OID":715,"clu_number":"1","data_source_site_identifier":null,"comments":" ","county_code":"165"},"geometry":{"type":"GeometryCollection","geometries":[{"type":"Polygon","coordinates":[[[-94.87951475374697,39.42147050593267],[-94.87942137926308,39.421314803312754],[-94.87934150735622,39.42126864893478],[-94.87922778962441,39.421263720525296],[-94.87919449985661,39.42132524512063],[-94.87923197487531,39.421419503756994],[-94.87927655466962,39.421452668776745],[-94.87928515424183,39.421471378221085],[-94.87862454665662,39.42147388960676],[-94.87861229992433,39.42144306666134],[-94.8784813004031,39.421445182499404],[-94.87832392275182,39.42144095845658],[-94.87820166653323,39.421442933423876],[-94.87806975701861,39.42141117780233],[-94.87797224130125,39.421358540647034],[-94.87789037064289,39.42123788904775],[-94.87777084620107,39.42101620594464],[-94.87766933118408,39.4208145488769],[-94.87761511156847,39.420747661664976],[-94.87764949278935,39.42072678065035],[-94.87764712932183,39.42063873056842],[-94.87757491285782,39.42055179902877],[-94.87745246439977,39.420547000338],[-94.87733111817455,39.420582845127456],[-94.87732564653615,39.42070490797166],[-94.87738986979076,39.42081906094737],[-94.87744536231914,39.420933363629395],[-94.8774999457524,39.421013804186444],[-94.87758181551247,39.42113444784626],[-94.87765475961186,39.421248468962595],[-94.87769242597172,39.42134950894214],[-94.8776329278555,39.42141145676834],[-94.87751121601598,39.42143374767415],[-94.8772843366095,39.42144418599448],[-94.87712750513394,39.42146027718758],[-94.87708768191908,39.42147969653519],[-94.87657444834612,39.421481627782924],[-94.87657732026008,39.42146915690424],[-94.87661463088709,39.421231381906594],[-94.87685680231463,39.42081411446344],[-94.87694049655303,39.42067723939459],[-94.87712661939507,39.42045062187767],[-94.87733422185384,39.42004746210872],[-94.87765298094759,39.419554428291654],[-94.87809126448313,39.418632553823564],[-94.87825063819095,39.41838603130604],[-94.87847223370692,39.418179165268256],[-94.87877296810447,39.41799134557514],[-94.88040541628318,39.41794463520068],[-94.88192651738412,39.41798100736474],[-94.88194929326983,39.4188276911013],[-94.88185361101397,39.41884278149849],[-94.88173279389645,39.41889894800462],[-94.88162091232108,39.41896174534572],[-94.88165820677843,39.419049230573584],[-94.88187581377453,39.41934386896541],[-94.88188800750619,39.41947243018186],[-94.8818181428316,39.419473560650125],[-94.88176684723226,39.41951503404091],[-94.88162711878138,39.419517294975975],[-94.88142461965171,39.419459593224325],[-94.8812334132435,39.41949656279513],[-94.88111334621925,39.41957981833842],[-94.8812299637128,39.419693130686426],[-94.8815418084738,39.41991848280093],[-94.88185163921192,39.420069320420595],[-94.88198010009418,39.420297638676274],[-94.88195809586131,39.42045384599171],[-94.88181218610296,39.42055107037729],[-94.88168027658833,39.420519328228465],[-94.88158366996605,39.42050056578804],[-94.88153236179028,39.42054204758916],[-94.88144575072215,39.42057055937357],[-94.88123690768994,39.42060103919796],[-94.8809483517527,39.42059215659489],[-94.88061303042008,39.42046883055578],[-94.88015074659509,39.4201713697359],[-94.87979432473475,39.41991285756002],[-94.8795845618277,39.41990947311617],[-94.87945647644123,39.420019966760435],[-94.87953070782642,39.4201813932587],[-94.87987129238829,39.42050114940362],[-94.88035306785832,39.42087283311937],[-94.88080372389027,39.42106205723416],[-94.88104188254346,39.42114629353779],[-94.88118179604727,39.42115081460817],[-94.88143304764571,39.421072202763895],[-94.8817459784699,39.421012936749925],[-94.88191428502489,39.42109830147299],[-94.88206528643425,39.421190721455545],[-94.88202544345646,39.42133367587142],[-94.88195739966694,39.42140254789863],[-94.87970392457277,39.421425426578786],[-94.87967838996082,39.4214698883219],[-94.87951475374697,39.42147050593267]]]},{"type":"Point","coordinates":[-94.88069257699999,39.41922479500005]}]}},{"type":"Feature","properties":{"farm_number":"' + farm.Farm_Number__c + '","admin_state":"29","tract_number":"7638","admin_county":"165","tract_boundary":true},"geometry":{"type":"Polygon","coordinates":[[[-94.88208012024566,39.41781980451897],[-94.88208030610609,39.4178198097038],[-94.88208047713715,39.41781988826502],[-94.88209146706191,39.417825449867394],[-94.88209157903428,39.41782551654047],[-94.88209159109434,39.4178256568932],[-94.88209280452637,39.417986830545644],[-94.8820967616052,39.41851606273822],[-94.88209818723153,39.418706803334445],[-94.8821167572051,39.42118762714378],[-94.88211879142823,39.42146041620181],[-94.88211878461755,39.42146059390866],[-94.88211863866847,39.4214605990707],[-94.87967838996067,39.42146988831661],[-94.87951475374683,39.42147050593267],[-94.87928515424187,39.421471378221085],[-94.8786245466566,39.421473889600556],[-94.87828418397852,39.421475170628554],[-94.8779605820672,39.42147639682865],[-94.8770876819191,39.421479696531705],[-94.87657444834134,39.42148162778294],[-94.87624258699462,39.42148287623212],[-94.87624242379006,39.42148287119665],[-94.87624244082187,39.421482843807276],[-94.87624248609893,39.42148277947757],[-94.87665726736063,39.420922806065946],[-94.87665744383055,39.42092256012655],[-94.87672844653527,39.42082037598482],[-94.87708318980556,39.420309801258945],[-94.87708329213974,39.42030965107734],[-94.87708363769767,39.42030909537501],[-94.87708375439276,39.420308887573256],[-94.87726619752887,39.41997474152142],[-94.8772663681733,39.41997441480966],[-94.87788221265266,39.4187404336714],[-94.87788230309742,39.41874026542463],[-94.8778823408727,39.41874020326283],[-94.87822200430206,39.41820854463647],[-94.87822206231783,39.41820846366355],[-94.87822213947236,39.4182083812865],[-94.87858865580426,39.417852416763104],[-94.87858872227856,39.417852355408144],[-94.87858875094128,39.41785233318827],[-94.87858890521363,39.41785232785383],[-94.8787503704109,39.41785197781767],[-94.87875044521633,39.4178519773757],[-94.87947985689314,39.41784493938407],[-94.88089086406609,39.417831306824695],[-94.88208012024566,39.41781980451897]]]}}]}';
	}


	private Land__c getFarm(String farmId) {
		return [
			SELECT Farm_Number__c, Hel_Code__c
			FROM Land__c
			WHERE Id = :this.farmId
		];
	}
}